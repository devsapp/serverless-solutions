edition: 1.0.0          #  命令行YAML规范版本，遵循语义化版本（Semantic Versioning）规范。
name: serverless-transform-templates     #  项目名称。
access: fc-dev          #  密钥别名。

vars:
  service:
    name: "{{serviceName}}"
    description: 'serverless transform templates for ETL'
    internetAccess: true
    role:
    logConfig: auto
services:
  filtering: #  服务名称。
    component: devsapp/fc  # 组件名称。
    actions:
      pre-deploy: # 在deploy之前运行
        - run: s build --use-docker      # 要执行的系统命令，类似于一种钩子的形式
          path: ./
    props: #  组件的属性值。
      region: "{{region}}"
      service: ${vars.service}
      function:
        name: "filtering"
        description: 'this is serverless transform function for filtering'
        codeUri: './filtering'
        handler: 'index.handler_message'
        memorySize: 128
        runtime: python3.9
        timeout: 60
        asyncConfiguration:
          maxAsyncRetryAttempts: 0
          statefulInvocation: true
  transform_enrichment: #  服务名称。
    component: devsapp/fc  # 组件名称。
    actions:
      pre-deploy: # 在deploy之前运行
        - run: s build --use-docker      # 要执行的系统命令，类似于一种钩子的形式
          path: ./
    props: #  组件的属性值。
      region: "{{region}}"
      service: ${vars.service}
      function:
        name: "transform_enrichment"
        description: 'this is serverless transform function for enrichment'
        codeUri: './transform_enrichment'
        handler: 'index.handler_message'
        memorySize: 128
        runtime: python3.9
        timeout: 60
        asyncConfiguration:
          maxAsyncRetryAttempts: 0
          statefulInvocation: true
  transform_projection: #  服务名称。
    component: devsapp/fc  # 组件名称。
    actions:
      pre-deploy: # 在deploy之前运行
        - run: s build --use-docker      # 要执行的系统命令，类似于一种钩子的形式
          path: ./
    props: #  组件的属性值。
      region: "{{region}}"
      service: ${vars.service}
      function:
        name: "transform_projection"
        description: 'this is serverless transform function for projection'
        codeUri: './transform_projection'
        handler: 'index.handler_message'
        memorySize: 128
        runtime: python3.9
        timeout: 60
        asyncConfiguration:
          maxAsyncRetryAttempts: 0
          statefulInvocation: true
  transform_split: #  服务名称。
    component: devsapp/fc  # 组件名称。
    actions:
      pre-deploy: # 在deploy之前运行
        - run: s build --use-docker      # 要执行的系统命令，类似于一种钩子的形式
          path: ./
    props: #  组件的属性值。
      region: "{{region}}"
      service: ${vars.service}
      function:
        name: "transform_split"
        description: 'this is serverless transform function for spliting'
        codeUri: './transform_split'
        handler: 'index.handler_message'
        memorySize: 128
        runtime: python3.9
        timeout: 60
        asyncConfiguration:
          maxAsyncRetryAttempts: 0
          statefulInvocation: true
  dynamic_routing: #  服务名称。
    component: devsapp/fc  # 组件名称。
    actions:
      pre-deploy: # 在deploy之前运行
        - run: s build --use-docker      # 要执行的系统命令，类似于一种钩子的形式
          path: ./
    props: #  组件的属性值。
      region: "{{region}}"
      service: ${vars.service}
      function:
        name: "ing"
        description: 'this is serverless transform function for dynamic routing'
        codeUri: './dynamic_routing'
        handler: 'index.handler_message'
        memorySize: 128
        runtime: python3.9
        timeout: 60
        asyncConfiguration:
          maxAsyncRetryAttempts: 0
          statefulInvocation: true